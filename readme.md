# RoboJackets IGVC [![Build Status](https://circleci.com/gh/RoboJackets/igvc-software/tree/master.svg?&style=shield)](https://circleci.com/gh/RoboJackets/igvc-software/tree/master)

Welcome to the RoboJackets IGVC software repo!
This document will give you a brief description of the repo's layout and some simple instructions for building the documentation and project. For more detailed information, please visit the [wiki](wiki.robojackets.org).

The online API documentation generated by Doxygen is located [here](robojackets.github.io/igvc-software/).

## Folder Structure
The repo is comprised of multiple ROS packages and one sandbox folder for miscellaneous resources.
 * **igvc_description**
    *URDF files for our robot and gazebo meshes used for simulation*
 * **igvc_gazebo**
    *Helper nodes used for simulation purposes*
 * **igvc_msgs**
    *Custom ROS messages used in the various ROS packages*
 * **igvc_navigation**
    *Collection of nodes that form our navigation stack*
 * **igvc_perception**
    *Collection of nodes that form our perception stack, most notably the line detector*
 * **igvc_platform**
    *Nodes that are platform specific and used to communicate with the hardware, ie. IMU, joystick and motor controller*
 * **igvc_rviz_plugins**
    *RVIZ plugins that provide visualization for our stack.*
 * **igvc_utils**
    *A collection of utility nodes and classes*
 * **sandbox**
    *Miscellaneous resources, including the models used by the neural network, udev rules, and waypoints files*
 * **documents**
    *Research and design documents.*

## Building Documentation
Documentation for our code can be generated via the rosdoc_lite tool.


## Building Code
This repository should be cloned into the src directory of a catkin workspace. Use `catkin_make` in the workspace directory to build the code. Dependencies can be installed by `rosdep install packageName` on packages igvc, igvc_control, and igvc_description . (NOTE: Be sure to `source devel/setup.sh` before referencing the igvc or igvc_msgs packages.)

For a guide on installing our code please go to [our guide](https://wiki.robojackets.org/IGVC_Software_Installation_Instructions)

Join the chat [here!](https://robojackets.slack.com/)

## Running Gazebo
You can get started with the IGVC code base right away by launching our simulator!

**Load up Jessii:**
The following command will load our platform into a simulated IGVC course:
```
roslaunch igvc_gazebo gazebo.launch
```
**Map the surrounding environment:**
Then, the following command will start our mapper
```
roslaunch igvc_navigation mapper.launch
```
To obtain a visualization of the robot's sensor readings, the occupancy grid, and its planned path, set the `plot_rviz` flag to `true`:
```
roslaunch igvc_navigation mapper.launch plot_rviz:=true
```

**Navigate the course:**
Next, run the following commands in separate terminal windows to start our global planner, local planner, and path follower nodes and navigate around the course autonomously
```
roslaunch igvc_navigation field_d_planner.launch simulation:=true
roslaunch igvc_navigation trajectory_planner.launch
roslaunch igvc_navigation path_follower.launch
```

Alternatively, you can control the robot manually with a USB gamepad with this command:
```
roslaunch igvc joystick_driver.launch
```
