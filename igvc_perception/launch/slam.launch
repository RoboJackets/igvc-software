<?xml version="1.0"?>

<launch>

    <include file="$(find igvc_navigation)/launch/wheel_odometry.launch" />

    <node name="slam" pkg="igvc_perception" type="slam" output="screen">
        <!-- Needs to be updated for each location: https://www.ngdc.noaa.gov/geomag/calculators/magcalc.shtml -->
        <param name="localMagneticField" value="[0.0000227095, 0.0000020783, -0.0000432753]" />
        <param name="magNoiseConstant" value="0.00000005" />
        <remap from="/slam/position" to="/odometry/filtered"/>
    </node>

    <node pkg="igvc_utils" type="quaternion_to_rpy" name="odometry_filtered_to_rpy" respawn="true" output="screen">
        <param name="topics/quaternion" value="/odometry/filtered"/>
        <param name="topics/rpy" value="/odometry/rpy"/>
        <param name="message_type" value="odometry"/>
    </node>
</launch>